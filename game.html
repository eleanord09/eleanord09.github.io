<!DOCTYPE html>
<html>
<head>
  <title>Branch Jumper</title>
  <style>
    canvas {
      border: 1px solid black;
      background-color: #e0f7fa;
    }
  </style>
</head>
<body>
  <h2>Branch Jumper</h2>
  <p>Press <strong>Spacebar</strong> to jump from branch to branch!</p>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const player = {
      x: 200,
      y: 300,
      radius: 15,
      color: "green",
      vy: 0,
      gravity: 0.5,
      jumpPower: -10,
      onGround: false
    };

    const branches = [
      { x: 150, y: 350, width: 100, height: 10 },
      { x: 200, y: 250, width: 100, height: 10 },
      { x: 120, y: 150, width: 100, height: 10 },
      { x: 180, y: 50, width: 100, height: 10 }
    ];

    let gameOver = false;
    let gameWon = false;

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space" && player.onGround && !gameOver && !gameWon) {
        player.vy = player.jumpPower;
        player.onGround = false;
      }
    });

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.beginPath();
      ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
      ctx.fill();
    }

    function drawBranches() {
      ctx.fillStyle = "brown";
      branches.forEach(branch => {
        ctx.fillRect(branch.x, branch.y, branch.width, branch.height);
      });
    }

    function checkCollision(branch) {
      return (
        player.y + player.radius >= branch.y &&
        player.y + player.radius <= branch.y + branch.height &&
        player.x >= branch.x &&
        player.x <= branch.x + branch.width &&
        player.vy >= 0
      );
    }

    function updateBranches() {
      branches.forEach(branch => {
        branch.y += 1; // move branches downward
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Move branches
      updateBranches();

      // Apply gravity
      player.vy += player.gravity;
      player.y += player.vy;

      // Check for landing
      player.onGround = false;
      branches.forEach(branch => {
        if (checkCollision(branch)) {
          player.y = branch.y - player.radius;
          player.vy = 0;
          player.onGround = true;
        }
      });

      // Check for game over or win
      if (player.y > canvas.height) {
        gameOver = true;
      }

      if (player.y < 0) {
        gameWon = true;
      }

      drawBranches();
      drawPlayer();

      if (gameOver) {
        ctx.fillStyle = "red";
        ctx.font = "20px Arial";
        ctx.fillText("Game Over", 140, 200);
      } else if (gameWon) {
        ctx.fillStyle = "green";
        ctx.font = "20px Arial";
        ctx.fillText("You Win!", 150, 200);
      } else {
        requestAnimationFrame(draw);
      }
    }

    draw();
  </script>
</body>
</html>
